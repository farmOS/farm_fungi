langcode: en
status: true
dependencies:
  enforced:
    module:
      - farm_fungi
      - farm_migrate
id: farm_migrate_asset_fungi
label: 'Assets (Fungi)'
migration_group: farm_migrate_asset
migration_tags:
  - 'Drupal 7'
  - 'farmOS 1.x'
class: Drupal\migrate\Plugin\Migration
field_plugin_method: null
cck_plugin_method: null
source:
  plugin: d7_farm_fungi_asset
  bundle: substrate
destination:
  plugin: 'entity:asset'
process:
  # Hard-code the bundle.
  type:
    plugin: default_value
    default_value: fungi
  # Maintain the asset ID.
  id:
    plugin: get
    source: id
  # Fungi specific fields.
  fungi_type:
    plugin: sub_process
    source: field_farm_mushroom_species
    process:
      target_id:
        plugin: migration_lookup
        migration: farm_migrate_taxonomy_fungi_type
        source: tid
  substrate_type:
    plugin: sub_process
    source: field_farm_substrate_type
    process:
      target_id:
        plugin: migration_lookup
        migration: farm_migrate_taxonomy_substrate_type
        source: tid
  # Concatenate the 1.x quantity field data into Notes.
  notes/0/value:
    plugin: concat
    source:
      - quantity_summary
      - field_farm_description/0/value
  notes/0/format:
    plugin: static_map
    source: field_farm_description/0/format
    map:
      farm_format: default
      plain_text: plain_text
    default_value: default
migration_dependencies:
  required:
    - farm_migrate_taxonomy_fungi_type
    - farm_migrate_taxonomy_substrate_type
  optional: {  }
